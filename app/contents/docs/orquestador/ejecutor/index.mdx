---
title: Ejecutor de proyectos
description: Componente responsable de ejecutar paso a paso un proyecto orquestado, gestionando configuraci√≥n, logs y conexi√≥n SQL.
---

## ‚öôÔ∏è ¬øQu√© es el `EjecutorProyecto`?

Es la clase principal que coordina la ejecuci√≥n paso a paso de un proyecto generado por el Orquestador. Se encarga de:

- Cargar la configuraci√≥n desde `config/config.json`
- Validar y preparar los pasos definidos por el usuario
- Ejecutarlos secuencialmente y medir su tiempo
- Manejar el paso de informaci√≥n entre pasos (`payload`)
- Configurar y redirigir los logs a un archivo
- Verificar la conectividad a bases de datos (si hay pasos SQL)

---

## üìå ¬øD√≥nde se usa?

Este ejecutor se instancia y ejecuta autom√°ticamente en el archivo `ejecucion.py`, el cual es el **punto de entrada principal** del proyecto. All√≠ se definen los pasos a ejecutar y se permite pasar par√°metros por consola:

```python
from orquestador.core.ejecutor import EjecutorProyecto

ejecutor = EjecutorProyecto(
    nombre_proyecto="empresa_proyecto_TIPO",
    pasos=[PasoTransformar()],
    **kw
)
ejecutor.ejecutar()
```

El script acepta argumentos como:

```bash
python ejecucion.py --ruta_logs=logs/personalizados --ruta_resultados=resultados/2024
```

Estos argumentos se integran con la configuraci√≥n global del proyecto, permitiendo m√°xima flexibilidad sin editar el c√≥digo.

---

## üß† Funciones clave del ejecutor

### `_cargar_configuracion()`
Carga el archivo `config.json` y mezcla par√°metros globales con los argumentos pasados por consola (`kwargs`).

### `_validar_pasos()`
Valida que cada paso definido herede de `PasoBase`. As√≠ se asegura que todos los pasos tengan una interfaz com√∫n.

### `_verificar_requisitos_sql()`
Si hay pasos SQL (`PasoSQL`), valida:
- Que exista una clave `dsn` en la configuraci√≥n
- Que ese DSN est√© registrado en el sistema
- Que la conexi√≥n sea exitosa

### `_configurar_logs()`
Redirige toda la salida est√°ndar (`stdout` y `stderr`) hacia un archivo `logs/log_<timestamp>.log`, sin perder los colores en consola.

### `ejecutar()`
Itera sobre los pasos definidos:
1. Muestra el nombre del paso
2. Configura par√°metros globales y espec√≠ficos
3. Ejecuta el paso
4. Mide el tiempo y guarda la `payload` generada

---

## üîç ¬øQu√© es `TeeLogger`?

Es una clase auxiliar que **duplica la salida** del programa:  
- Muestra en consola con colores  
- Guarda en archivo limpio, sin caracteres ANSI

Esto permite tener trazabilidad de la ejecuci√≥n sin perder legibilidad en consola.

---

## üéØ ¬øPor qu√© es tan importante `ejecucion.py`?

- Permite definir los pasos del proyecto sin modificar el n√∫cleo
- Es el punto desde el cual se lanza todo el flujo
- Acepta argumentos desde CLI para m√°xima reutilizaci√≥n
- A√≠sla la l√≥gica del orquestador del resto del c√≥digo

---

## ‚úÖ Recomendaciones

- Define los pasos en orden en `ejecucion.py`
- Usa `--ruta_logs` y `--ruta_resultados` para redirigir salidas
- Aseg√∫rate de tener `config/config.json` antes de ejecutar

Este componente garantiza una **ejecuci√≥n ordenada, auditable y extensible** de cualquier flujo orquestado.